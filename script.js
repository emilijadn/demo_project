var json = `{
    "mvPurchaseOrders":[
       {
          "PurchaseOrderId":90,
          "PurchaseOrderTypeId":4,
          "PurchaseOrderTypeAbbreviation":"PO",
          "PurchaseOrderTypeDescription":"Purchase Order",
          "PurchaseOrderNo":"3",
          "PurchaseOrderReferenceNo":"",
          "PurchaseOrderReferenceApplication":"",
          "PurchaseOrderDate":"/Date(1606431600000-0000)/",
          "PurchaseOrderCustomOrderDate1":"/Date(-62135596800000-0000)/",
          "PurchaseOrderCustomOrderDate2":"/Date(-62135596800000-0000)/",
          "PurchaseOrderCurrencyCode":"ZAR",
          "PurchaseOrderSupplierID":2,
          "PurchaseOrderAddress":"One Microsoft Way, Redmond, WA 98052-7329, United States",
          "PurchaseOrderPickupAddress":"221b Baker St. Marylebone, London, W1 221B, United Kingdom",
          "PurchaseOrderContactPerson":"Puneet Dhal",
          "PurchaseOrderInventoryLocationID":2,
          "PurchaseOrderCustomFlag1":false,
          "PurchaseOrderCustomFlag2":false,
          "PurchaseOrderCustomFlag3":false,
          "PurchaseOrderCustomFlag4":false,
          "PurchaseOrderCustomFlag5":false,
          "PurchaseOrderCustomFlag6":false,
          "PurchaseOrderCustomFlag7":false,
          "PurchaseOrderCustomFlag8":false,
          "PurchaseOrderCustomFlag9":false,
          "PurchaseOrderCustomFlag10":false,
          "PurchaseOrderComments":"",
          "PurchaseOrderTags":"",
          "PurchaseOrderPaymentTermsEnumeration":"None",
          "PurchaseOrderTotalQuantity":35,
          "PurchaseOrderAmountSubtotalWithoutTaxAndDiscount":4192,
          "PurchaseOrderAmountTotalDiscount":0,
          "PurchaseOrderAmountTotalTax":0,
          "PurchaseOrderAmountGrandTotal":4192,
          "PurchaseOrderDetails":[
             {
                "PurchaseOrderRowDetailID":163,
                "PurchaseOrderRowProductID":6,
                "PurchaseOrderRowProductSKU":"PRODUCT_6",
                "PurchaseOrderRowProductDescription":"This is the description of Product 6. Product description appears in order forms and invoices. ",
                "PurchaseOrderRowQuantity":12,
                "PurchaseOrderRowReceivedQuantity":0,
                "PurchaseOrderRowInvoicedQuantity":0,
                "PurchaseOrderRowUnitPriceWithoutTaxOrDiscount":35,
                "PurchaseOrderRowTaxID":0,
                "PurchaseOrderTotalTaxAmount":0,
                "PurchaseOrderRowDiscountID":0,
                "PurchaseOrderRowTotalDiscountAmount":0,
                "PurchaseOrderRowTotalAmount":420,
                "PurchaseOrderRowSerialNumbers":[
                   
                ],
                "PurchaseOrderRowBatchNumbers":[
                   
                ],
                "PurchaseOrderRowRemarks":"",
                "PurchaseOrderRowExpectedReceivingDateEarliest":"/Date(-62135596800000-0000)/",
                "PurchaseOrderRowExpectedReceivingDateLatest":"/Date(-62135596800000-0000)/"
             },
             {
                "PurchaseOrderRowDetailID":164,
                "PurchaseOrderRowProductID":8,
                "PurchaseOrderRowProductSKU":"PRODUCT_8",
                "PurchaseOrderRowProductDescription":"This is the description of Product 8. Product description appears in order forms and invoices. ",
                "PurchaseOrderRowQuantity":8,
                "PurchaseOrderRowReceivedQuantity":0,
                "PurchaseOrderRowInvoicedQuantity":0,
                "PurchaseOrderRowUnitPriceWithoutTaxOrDiscount":164,
                "PurchaseOrderRowTaxID":0,
                "PurchaseOrderTotalTaxAmount":0,
                "PurchaseOrderRowDiscountID":0,
                "PurchaseOrderRowTotalDiscountAmount":0,
                "PurchaseOrderRowTotalAmount":1312,
                "PurchaseOrderRowSerialNumbers":[
                   
                ],
                "PurchaseOrderRowBatchNumbers":[
                   
                ],
                "PurchaseOrderRowRemarks":"",
                "PurchaseOrderRowExpectedReceivingDateEarliest":"/Date(-62135596800000-0000)/",
                "PurchaseOrderRowExpectedReceivingDateLatest":"/Date(-62135596800000-0000)/"
             },
             {
                "PurchaseOrderRowDetailID":165,
                "PurchaseOrderRowProductID":9,
                "PurchaseOrderRowProductSKU":"PRODUCT_9_VERSION_A",
                "PurchaseOrderRowProductDescription":"This is the description of Product 9. Product description appears in order forms and invoices. Version A",
                "PurchaseOrderRowQuantity":15,
                "PurchaseOrderRowReceivedQuantity":0,
                "PurchaseOrderRowInvoicedQuantity":0,
                "PurchaseOrderRowUnitPriceWithoutTaxOrDiscount":164,
                "PurchaseOrderRowTaxID":0,
                "PurchaseOrderTotalTaxAmount":0,
                "PurchaseOrderRowDiscountID":0,
                "PurchaseOrderRowTotalDiscountAmount":0,
                "PurchaseOrderRowTotalAmount":2460,
                "PurchaseOrderRowSerialNumbers":[
                   
                ],
                "PurchaseOrderRowBatchNumbers":[
                   
                ],
                "PurchaseOrderRowRemarks":"",
                "PurchaseOrderRowExpectedReceivingDateEarliest":"/Date(-62135596800000-0000)/",
                "PurchaseOrderRowExpectedReceivingDateLatest":"/Date(-62135596800000-0000)/"
             }
          ],
          "PurchaseOrderStatus":"Verified",
          "chkReOpenOrCloseRelatedDocs":false,
          "PurchaseOrderCreationDate":"/Date(1606491656437-0000)/",
          "PurchaseOrderLastUpdatedDate":"/Date(1606491656547-0000)/",
          "PurchaseOrderExpectedReceivingDateEarliest":"/Date(-62135596800000-0000)/",
          "PurchaseOrderExpectedReceivingDateLatest":"/Date(-62135596800000-0000)/"
       },
       {
          "PurchaseOrderId":89,
          "PurchaseOrderTypeId":4,
          "PurchaseOrderTypeAbbreviation":"PO",
          "PurchaseOrderTypeDescription":"Purchase Order",
          "PurchaseOrderNo":"2",
          "PurchaseOrderReferenceNo":"",
          "PurchaseOrderReferenceApplication":"",
          "PurchaseOrderDate":"/Date(1606431600000-0000)/",
          "PurchaseOrderCustomOrderDate1":"/Date(-62135596800000-0000)/",
          "PurchaseOrderCustomOrderDate2":"/Date(-62135596800000-0000)/",
          "PurchaseOrderCurrencyCode":"EUR",
          "PurchaseOrderSupplierID":1,
          "PurchaseOrderAddress":"410 Terry Ave. North Seattle, WA, 98109-5210, United States",
          "PurchaseOrderPickupAddress":"1 New Orchard Road, Armonk, New York 10504-1722, United States",
          "PurchaseOrderContactPerson":"Chris A.",
          "PurchaseOrderInventoryLocationID":1,
          "PurchaseOrderCustomFlag1":false,
          "PurchaseOrderCustomFlag2":false,
          "PurchaseOrderCustomFlag3":false,
          "PurchaseOrderCustomFlag4":false,
          "PurchaseOrderCustomFlag5":false,
          "PurchaseOrderCustomFlag6":false,
          "PurchaseOrderCustomFlag7":false,
          "PurchaseOrderCustomFlag8":false,
          "PurchaseOrderCustomFlag9":false,
          "PurchaseOrderCustomFlag10":false,
          "PurchaseOrderComments":"",
          "PurchaseOrderTags":"",
          "PurchaseOrderPaymentTermsEnumeration":"None",
          "PurchaseOrderTotalQuantity":16,
          "PurchaseOrderAmountSubtotalWithoutTaxAndDiscount":2240,
          "PurchaseOrderAmountTotalDiscount":0,
          "PurchaseOrderAmountTotalTax":0,
          "PurchaseOrderAmountGrandTotal":2240,
          "PurchaseOrderDetails":[
             {
                "PurchaseOrderRowDetailID":161,
                "PurchaseOrderRowProductID":2,
                "PurchaseOrderRowProductSKU":"PRODUCT_2",
                "PurchaseOrderRowProductDescription":"This is the description of Product 2. Product description appears in order forms and invoices. ",
                "PurchaseOrderRowQuantity":12,
                "PurchaseOrderRowReceivedQuantity":0,
                "PurchaseOrderRowInvoicedQuantity":0,
                "PurchaseOrderRowUnitPriceWithoutTaxOrDiscount":170,
                "PurchaseOrderRowTaxID":0,
                "PurchaseOrderTotalTaxAmount":0,
                "PurchaseOrderRowDiscountID":0,
                "PurchaseOrderRowTotalDiscountAmount":0,
                "PurchaseOrderRowTotalAmount":2040,
                "PurchaseOrderRowSerialNumbers":[
                   
                ],
                "PurchaseOrderRowBatchNumbers":[
                   
                ],
                "PurchaseOrderRowRemarks":"",
                "PurchaseOrderRowExpectedReceivingDateEarliest":"/Date(-62135596800000-0000)/",
                "PurchaseOrderRowExpectedReceivingDateLatest":"/Date(-62135596800000-0000)/"
             },
             {
                "PurchaseOrderRowDetailID":162,
                "PurchaseOrderRowProductID":6,
                "PurchaseOrderRowProductSKU":"PRODUCT_6",
                "PurchaseOrderRowProductDescription":"This is the description of Product 6. Product description appears in order forms and invoices. ",
                "PurchaseOrderRowQuantity":4,
                "PurchaseOrderRowReceivedQuantity":0,
                "PurchaseOrderRowInvoicedQuantity":0,
                "PurchaseOrderRowUnitPriceWithoutTaxOrDiscount":50,
                "PurchaseOrderRowTaxID":0,
                "PurchaseOrderTotalTaxAmount":0,
                "PurchaseOrderRowDiscountID":0,
                "PurchaseOrderRowTotalDiscountAmount":0,
                "PurchaseOrderRowTotalAmount":200,
                "PurchaseOrderRowSerialNumbers":[
                   
                ],
                "PurchaseOrderRowBatchNumbers":[
                   
                ],
                "PurchaseOrderRowRemarks":"",
                "PurchaseOrderRowExpectedReceivingDateEarliest":"/Date(-62135596800000-0000)/",
                "PurchaseOrderRowExpectedReceivingDateLatest":"/Date(-62135596800000-0000)/"
             }
          ],
          "PurchaseOrderStatus":"Verified",
          "chkReOpenOrCloseRelatedDocs":false,
          "PurchaseOrderCreationDate":"/Date(1606491478850-0000)/",
          "PurchaseOrderLastUpdatedDate":"/Date(1606491523467-0000)/",
          "PurchaseOrderExpectedReceivingDateEarliest":"/Date(-62135596800000-0000)/",
          "PurchaseOrderExpectedReceivingDateLatest":"/Date(-62135596800000-0000)/"
       },
       {
          "PurchaseOrderId":88,
          "PurchaseOrderTypeId":4,
          "PurchaseOrderTypeAbbreviation":"PO",
          "PurchaseOrderTypeDescription":"Purchase Order",
          "PurchaseOrderNo":"1",
          "PurchaseOrderReferenceNo":"",
          "PurchaseOrderReferenceApplication":"",
          "PurchaseOrderDate":"/Date(1606431600000-0000)/",
          "PurchaseOrderCustomOrderDate1":"/Date(-62135596800000-0000)/",
          "PurchaseOrderCustomOrderDate2":"/Date(-62135596800000-0000)/",
          "PurchaseOrderCurrencyCode":"EUR",
          "PurchaseOrderSupplierID":1,
          "PurchaseOrderAddress":"410 Terry Ave. North Seattle, WA, 98109-5210, United States",
          "PurchaseOrderPickupAddress":"1 New Orchard Road, Armonk, New York 10504-1722, United States",
          "PurchaseOrderContactPerson":"Babis",
          "PurchaseOrderInventoryLocationID":0,
          "PurchaseOrderCustomFlag1":false,
          "PurchaseOrderCustomFlag2":false,
          "PurchaseOrderCustomFlag3":false,
          "PurchaseOrderCustomFlag4":false,
          "PurchaseOrderCustomFlag5":false,
          "PurchaseOrderCustomFlag6":false,
          "PurchaseOrderCustomFlag7":false,
          "PurchaseOrderCustomFlag8":false,
          "PurchaseOrderCustomFlag9":false,
          "PurchaseOrderCustomFlag10":false,
          "PurchaseOrderComments":"",
          "PurchaseOrderTags":"",
          "PurchaseOrderPaymentTermsEnumeration":"None",
          "PurchaseOrderTotalQuantity":45,
          "PurchaseOrderAmountSubtotalWithoutTaxAndDiscount":1310,
          "PurchaseOrderAmountTotalDiscount":0,
          "PurchaseOrderAmountTotalTax":0,
          "PurchaseOrderAmountGrandTotal":1310,
          "PurchaseOrderDetails":[
             {
                "PurchaseOrderRowDetailID":157,
                "PurchaseOrderRowProductID":1,
                "PurchaseOrderRowProductSKU":"PRODUCT_1",
                "PurchaseOrderRowProductDescription":"This is the description of Product 1. Product description appears in order forms and invoices. ",
                "PurchaseOrderRowQuantity":10,
                "PurchaseOrderRowReceivedQuantity":0,
                "PurchaseOrderRowInvoicedQuantity":0,
                "PurchaseOrderRowUnitPriceWithoutTaxOrDiscount":100,
                "PurchaseOrderRowTaxID":0,
                "PurchaseOrderTotalTaxAmount":0,
                "PurchaseOrderRowDiscountID":0,
                "PurchaseOrderRowTotalDiscountAmount":0,
                "PurchaseOrderRowTotalAmount":1000,
                "PurchaseOrderRowSerialNumbers":[
                   
                ],
                "PurchaseOrderRowBatchNumbers":[
                   
                ],
                "PurchaseOrderRowRemarks":"",
                "PurchaseOrderRowExpectedReceivingDateEarliest":"/Date(-62135596800000-0000)/",
                "PurchaseOrderRowExpectedReceivingDateLatest":"/Date(-62135596800000-0000)/"
             },
             {
                "PurchaseOrderRowDetailID":158,
                "PurchaseOrderRowProductID":2,
                "PurchaseOrderRowProductSKU":"PRODUCT_2",
                "PurchaseOrderRowProductDescription":"This is the description of Product 2. Product description appears in order forms and invoices. ",
                "PurchaseOrderRowQuantity":5,
                "PurchaseOrderRowReceivedQuantity":0,
                "PurchaseOrderRowInvoicedQuantity":0,
                "PurchaseOrderRowUnitPriceWithoutTaxOrDiscount":50,
                "PurchaseOrderRowTaxID":0,
                "PurchaseOrderTotalTaxAmount":0,
                "PurchaseOrderRowDiscountID":0,
                "PurchaseOrderRowTotalDiscountAmount":0,
                "PurchaseOrderRowTotalAmount":250,
                "PurchaseOrderRowSerialNumbers":[
                   
                ],
                "PurchaseOrderRowBatchNumbers":[
                   
                ],
                "PurchaseOrderRowRemarks":"",
                "PurchaseOrderRowExpectedReceivingDateEarliest":"/Date(-62135596800000-0000)/",
                "PurchaseOrderRowExpectedReceivingDateLatest":"/Date(-62135596800000-0000)/"
             },
             {
                "PurchaseOrderRowDetailID":159,
                "PurchaseOrderRowProductID":3,
                "PurchaseOrderRowProductSKU":"PRODUCT_3",
                "PurchaseOrderRowProductDescription":"This is the description of Product 3. Product description appears in order forms and invoices. ",
                "PurchaseOrderRowQuantity":30,
                "PurchaseOrderRowReceivedQuantity":0,
                "PurchaseOrderRowInvoicedQuantity":0,
                "PurchaseOrderRowUnitPriceWithoutTaxOrDiscount":2,
                "PurchaseOrderRowTaxID":0,
                "PurchaseOrderTotalTaxAmount":0,
                "PurchaseOrderRowDiscountID":0,
                "PurchaseOrderRowTotalDiscountAmount":0,
                "PurchaseOrderRowTotalAmount":60,
                "PurchaseOrderRowSerialNumbers":[
                   
                ],
                "PurchaseOrderRowBatchNumbers":[
                   
                ],
                "PurchaseOrderRowRemarks":"",
                "PurchaseOrderRowExpectedReceivingDateEarliest":"/Date(-62135596800000-0000)/",
                "PurchaseOrderRowExpectedReceivingDateLatest":"/Date(-62135596800000-0000)/"
             }
          ],
          "PurchaseOrderStatus":"Pending",
          "chkReOpenOrCloseRelatedDocs":false,
          "PurchaseOrderCreationDate":"/Date(1606491468083-0000)/",
          "PurchaseOrderLastUpdatedDate":"/Date(1606491468083-0000)/",
          "PurchaseOrderExpectedReceivingDateEarliest":"/Date(-62135596800000-0000)/",
          "PurchaseOrderExpectedReceivingDateLatest":"/Date(-62135596800000-0000)/"
       }
    ],
    "ResponseStatus":{
       "ErrorCode":"0"
    }
    }`;
    
    var obj = JSON.parse(json);
    console.log(obj);

function printValues(obj) {
    for (var k in obj) {
        if (obj[k] instanceof Object) {
            printValues(obj[k]);
        } else {
            document.write(obj[k] + "<br>");
        };
    }
};

for (var i = 0; i < obj["mvPurchaseOrders"].length; i++) {
    let list = document.getElementById('list');
    let li = document.createElement("li");

    var a = document.createElement('a');

    a.textContent = obj["mvPurchaseOrders"][i]["PurchaseOrderTypeAbbreviation"] + " - " + obj["mvPurchaseOrders"][i]["PurchaseOrderNo"];
    a.setAttribute("onclick", "openPopup("+i+")")
  //  a.addEventListener("click", "openPopup("+i+")", false)
    li.appendChild(a);
    list.appendChild(li);
    list.appendChild(li);

}

let popup = document.getElementById('popup');

function openPopup(o) {
    popup.classList.add("open-popup");
    var headerNames = ['Product SKU', 'Quantity Ordered', 'Unit price', 'Total Amount'];

    var PurchaseOrderAddress = obj["mvPurchaseOrders"][o]["PurchaseOrderAddress"];
    var PurchaseOrderContactPerson = obj["mvPurchaseOrders"][o]["PurchaseOrderContactPerson"];
    var PurchaseOrderStatus = obj["mvPurchaseOrders"][o]["PurchaseOrderStatus"];
    var PurchaseOrderDetails = obj["mvPurchaseOrders"][o]["PurchaseOrderDetails"];

   
    let detailsDiv = document.getElementById('details');
    let p1 = document.createElement('p');
    let p2 = document.createElement('p');
    let p3 = document.createElement('p');
    p1.innerHTML = " <b> Purchase Order Address: </b>" + PurchaseOrderAddress +  "\n";
    p2.innerHTML = "<b>Purchase Order Contact Person: </b>" + PurchaseOrderContactPerson + "\n";
    p3.innerHTML = "<b>Purchase Order Status: </b>" + PurchaseOrderStatus + "\n";

    detailsDiv.appendChild(p1);
    detailsDiv.appendChild(p2);
    detailsDiv.appendChild(p3);





    // tabelico

    var table = document.createElement("table");
    table.className = "table";
    table.id = "idtable";
    table.border = "1";

  
    var row = table.insertRow(-1);   //creating the HEADERS
    row.className = "thead-dark";

    for (var i = 0; i < 4; i++) {
        var headerCell = document.createElement("th");
        headerCell.innerText = headerNames[i];
        row.appendChild(headerCell);
    }

        for (var i=0; i<obj["mvPurchaseOrders"][o]["PurchaseOrderDetails"].length; i++){ // 3,2,3
            row = table.insertRow(-1);

            var PurchaseOrderRowProductSKU = obj["mvPurchaseOrders"][o]["PurchaseOrderDetails"][i]["PurchaseOrderRowProductSKU"]; // Product SKU
            var PurchaseOrderRowQuantity = obj["mvPurchaseOrders"][o]["PurchaseOrderDetails"][i]["PurchaseOrderRowQuantity"]; // Quantity Ordered
            var PurchaseOrderRowUnitPriceWithoutTaxOrDiscount = obj["mvPurchaseOrders"][o]["PurchaseOrderDetails"][i]["PurchaseOrderRowUnitPriceWithoutTaxOrDiscount"]; // Unit Price 
            var PurchaseOrderRowTotalAmount = obj["mvPurchaseOrders"][o]["PurchaseOrderDetails"][i]["PurchaseOrderRowTotalAmount"];  // Total Amount
            var arrTable=[PurchaseOrderRowProductSKU, PurchaseOrderRowQuantity, PurchaseOrderRowUnitPriceWithoutTaxOrDiscount, PurchaseOrderRowTotalAmount];

            for (var j = 0; j < 4; j++) {
                var cell = row.insertCell(-1);
                cell.innerHTML = arrTable[j];
            }
         
        }

    var dvTable = document.getElementById("table"); 
    dvTable.innerHTML = ""; 
    dvTable.appendChild(table);

}

function closePopup() {
    popup.classList.remove("open-popup");
    location.reload();

}







